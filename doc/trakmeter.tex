\input{include/settings.sty}
\input{include/hyphenation.sty}

\title{traKmeter}
\author{Martin Zuther}

\begin{document}

\title{traKmeter}

\subtitle{
  \normalsize{\textrm{\textmd{
        \vfill
        Loudness meter for correctly setting up \\
        tracking and mixing levels
        \vfill
        \vspace{1.5em}
        \includegraphics[scale=0.45,clip]{include/images/trakmeter.png}
        \vfill
      }}}
}

\author{}

\date{\emph{Last edited on \today}}

\dedication{
  \includegraphics[scale=0.65,clip]{include/images/cc-by-sa.png}
  \vspace{0.25em}

  This documentation by \href{http://www.mzuther.de/}{Martin Zuther}
  is licensed under a
  \href{http://creativecommons.org/licenses/by-sa/4.0/}{Creative
    Commons Attribution-ShareAlike 4.0 International License} with the
  exception of trademark logos.

  \vspace{2.5em}

  \includegraphics[scale=0.55,clip]{include/images/VST_Compatible_Logo_Steinberg_negative.png}

  VST is a trademark of Steinberg Media Technologies GmbH,
  registered in Europe and other countries.
}

\maketitle

\tableofcontents

\clearpage  % layout

\chapter{Digital recordings}
\label{chap:digital_recordings}

The digital revolution brought a lot of advantages to the field of
audio processing such as higher fidelity, less noise and non-degrading
copies.  Unfortunately, however, digital audio also introduced some
problems of its own.

Whereas the analog domain is relatively inert against very high levels
(overdriving some analog equipment actually sounds pretty good), the
digital domain punishes even small transgressions into forbidden
territory with harsh clipping.

And while digital audio can be transferred without loss in quality, it
is degraded by each and every calculation, be it a simple change in
level, equalisation or a fancy effect.  Crossing domains from analog
to digital and \emph{vice versa} leads to additional degradation.
Finally, changes in bit depth and sample rate, jitter and inter-sample
peaks are nothing for the weak of heart.

However, most of these obstacles can be easily overcome by proper gain
staging, dithering, minimising the crossing of domains and choosing
appropriate bit depths and sample rates.  And if you carefully choose,
test and operate your equipment, you're well on your way to pure audio
bliss \dots

\section{Gain staging}
\label{sec:gain_staging}

The process of setting audio devices to run at optimal input and
output levels is called \emph{gain staging}.

Professional analog audio equipment is designed to be run at a nominal
level of \textbf{\SI[retain-explicit-plus]{+4}{\dBu}}
(\SI{1.23}{\VRMS}).  This leaves a headroom for peaks of at least
\SI{20}{\dB} to the clipping point.  Thus, driving all analog audio
equipment at \SI[retain-explicit-plus]{+4}{\dBu} ensures an optimal
signal-to-noise ratio while preventing clipping and keeping all
transients intact.

Now let's transfer this to the digital domain.  We'll adjust the
headroom by setting our average input and output levels to
\textbf{\SI{-20}{\dBFS} RMS}.  Again, this ensures a good
signal-to-noise ratio while preventing clipping.  In addition, this
level drives your outboard equipment and most of your plug-ins at
their respective ``sweet spot''.

There is another thing to consider: digital peak levels should not
exceed \textbf{\SI{-10}{\dBFS}}.  This will leave enough space for
sudden jumps in level and for inter-sample peaks -- audio peaks that
lie \emph{in-between} two successive samples and can lead to clipping
during digital-to-analog conversion.

Keeping input peak levels low may also improve the sound of mediocre
analog-to-digital converters.  Such converters can degrade audio when
fed with input levels close to digital full-scale (\SI{0}{\dBFS}),
resulting in the ``harshness'' that is often attributed to digital
audio.  My first \emph{prosumer} sound card definitely suffered from
this \dots

Speaking of me, once I transitioned to proper gain staging, my
recordings and mixes instantly got better.  If that is not worth some
consideration, I don't know what is.

\section{Digital audio myths}
\label{sec:digital_audio_myths}

I can almost hear you: digital recordings should be done at peak
levels close to but not exceeding \SI{0}{\dBFS} (digital full-scale).
Unfortunately, this misinformation has ended up in lots of manuals for
professional audio equipment.  But for the reasons given above it is
plain wrong.

Let's look at a worst-case scenario: even if your recordings
\emph{peak} at \SI{-20}{\dBFS} and you discard the least significant
bit (which mostly consists of errors and dithering noise), a bit depth
of 16 bit would still leave you with a signal-to-noise ratio of
\SI{70}{\dB}.  That is about what you can expect from some of the best
professional analog tape machines and recording desks -- and we're not
even talking of 24 bit.

To back me up, here are two Gearslutz posts written by a renowned
engineer:
\href{https://www.gearslutz.com/board/showpost.php?p=10739624&postcount=9}{\#1}
and
\href{https://www.gearslutz.com/board/showpost.php?p=9909382&postcount=96}{\#2}.
There is also a great
\href{http://www.gearslutz.com/board/5062929-post1.html}{thread} well
worth reading.  And the highly regarded manufacturer Harrison Audio
recommends a maximum recording level of
\href{http://www.harrisonconsoles.com/mixbus/mixbus4-live-manual/1/en/topic/gain-staging}{\SI{-15}{\dBFS}
  peak} for the Mixbus DAW.

\section{Introducing traKmeter}
\label{sec:introducing_trakmeter}

Sadly, most digital audio equipment only has peak meters.  This is
readily understandable as you want to avoid digital clippings by all
means.  However, badly chosen meter ranges and scales often render
these meters useless.  And the lack of average meters does not exactly
facilitate gain staging.

At the moment I realised this, I started coding traKmeter.  It has
evolved with my growing knowledge and recording experience, but the
underlying ideas haven't changed at all.

\chapter{traKmeter}
\label{chap:trakmeter}

\begin{wrapfigure}{r}{0.21\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/level_meter_complete.png}
\end{wrapfigure}

traKmeter consists of two meters, a peak meter on top and an average
meter below.  The meters are separated by an orange signal LED and
consist of an area of green LEDs that is enclosed by either blue ones
(lower levels) or yellow and then red ones (higher levels).

You may have noticed that the average meter's green area is centred
around the \textbf{\SI{0}{\dB} RMS} mark.  This number should be
vaguely familiar.  Remember, it corresponds to \SI{-20}{\dBFS} RMS,
the level we have determined to be the optimal average audio level in
the digital domain.

The highest green LED on the peak meter's top end corresponds to a
level of \textbf{\SI[retain-explicit-plus]{+11}{\dB}} (or
\SI{-9}{\dBFS}).  Again, this number should be familiar: during
digital recording, peak levels shouldn't exceed this level.

Thus, by keeping the meter's readout in the green areas and from
entering the yellow and especially the red areas on top of each meter,
you will automatically track at optimal audio levels.  It's as simple
as that!

\section{Tracking with traKmeter}
\label{sec:tracking_with_trakmeter}

Open up an instance of traKmeter and set it up so that it measures
your audio input.  That can be done either by starting the stand-alone
version and connecting it to one or more input channels of your sound
card, or by inserting a plug-in instance into an input channel of your
digital audio workstation.

In the second case, take care that your digital audio workstation
doesn't add additional headroom and that no processing takes place
before traKmeter.  This can be ascertained by feeding calibration
tones into your sound card or by directly comparing the readouts of
stand-alone and plug-in version.

\begin{wrapfigure}{r}{0.45\linewidth}
\includegraphics[scale=0.45,clip]{include/images/trakmeter_optimal.png}
\end{wrapfigure}

Now, feed the signal you want to record into an audio input channel
and adjust its level (in the analog domain!) using traKmeter.  Try to
set the input level so that it falls into the average meter's
\textbf{\SI{0}{\dB} RMS} area.  Make sure that peak levels very rarely
(if ever) exceed \textbf{\SI[retain-explicit-plus]{+11}{\dB}}.  In
case both conditions cannot be met simultaneously, adjust the peak
level only.  See the image to the right for a visual clue.

\section{Mixing with traKmeter}
\label{sec:mixing_with_trakmeter}

When you get someone else's tracks for mixing, chances are that they
have been recorded far too hot.  While you can't change that, you
might want to adjust them to optimal loudness so that your upcoming
mix is not ruined.

\emph{If the original recordings were made with poor equipment and you
  have got the time, it may well be worth to \textbf{re-record} all
  tracks through a really good preamp and adjust their loudness at the
  same time.  Depending on the preamp, the results can be stunning!}

In any case, mixing levels will now be much lower than what you are
used to.  This can easily be corrected by either adjusting the output
gain of your subgroups or by inserting a gain plug-in in your master
track.

To preserve all transients, the final loudness of your mix should stay
within \textbf{\SI{-20}{\dBFS} RMS} and \textbf{\SI{-16}{\dBFS} RMS}
(or between \textbf{\SI{0}{\dB} RMS} and
\textbf{\SI[retain-explicit-plus]{+4}{\dB} RMS} on the K-20 scale).
Remember that smashed transients will be gone forever, whereas you can
always bring up the volume during mastering!  My plug-in
\href{http://code.mzuther.de/}{\textbf{K-Meter}} and its K-20 scale
may help you with setting up correct mixing levels.

\chapter{Installation}
\label{chap:installation}

In order to use the pre-compiled binaries, simply extract the
traKmeter files from the downloaded archive.  For the plug-ins, you'll
then have to move the extracted files to your respective plug-in
folder.

On Windows, you might also have to install the
\href{https://www.visualstudio.com/downloads/}{Visual C++
  Redistributable für Visual Studio 2017}.

Should the stand-alone version ever fail to start, you can reset its
settings by deleting \path{trakmeter_stereo.ini} or
\path{trakmeter_surround.ini}.  These files are located in
\path{~/.config} (GNU/Linux) or \path{%appdata%\.config\} (Windows).

\chapter{Controls}
\label{chap:controls}

\section{Reset button}
\label{sec:reset_button}

\begin{wrapfigure}{r}{0.14\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_reset_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_reset_off.png}
\end{wrapfigure}

Click on this button to reset all meters.  This action will also
reload the current skin and re-draw everything.

\section{Crest factor button}
\label{sec:crest_factor_button}

\begin{wrapfigure}{r}{0.14\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_crest_factor_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_crest_factor_off.png}
\end{wrapfigure}

When this button is pressed, meter readout uses the K-20 scale (crest
factor of \SI{20}{\dB}).  Disengage the button to change to decibels
relative to digital full-scale (crest factor of \SI{0}{\dB}).

\emph{Please note that although this meter uses the K-20 scale, it is
  by no means a K-System meter.}

\newpage %% layout

\section{Select a skin}

\begin{wrapfigure}{r}{0.14\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_skin_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_skin_off.png}
\end{wrapfigure}

Click on this button to select the currently used traKmeter skin.  You
can also set a default skin that will be loaded when new plug-ins are
instantiated.

\section{Validation button}
\label{sec:validation_button}

\begin{wrapfigure}{r}{0.14\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_validate_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_validate_off.png}
\end{wrapfigure}

Click on this button to open the \textbf{validation window} (see
\ref{chap:validation}) which allows you to play an audio file through
traKmeter and dump internal data.  During validation, the button will
light up and clicking it will stop validation early.

On Linux, dumped data will be written to \path{stderr}, so just start
the traKmeter stand-alone or your plug-in host from the shell and
watch the output coming.  On Windows, you can also use DebugView by
Sysinternals (stand-alone) or have a look at Ableton Live's log files
(plug-in).  If none of that works, you might have to start either the
stand-alone or your plug-in host from a debugger.

As a side note, \textbf{SMA(50)} designates the moving average of 50
values, a neat way to emphasise trends and eliminate short-term
fluctuations.

\section{About button}

\begin{wrapfigure}{r}{0.14\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_about_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_about_off.png}
\end{wrapfigure}

Clicking on this button will open the \textbf{about window} where you
will be informed about version number, contributors, copyright and the
GNU General Public License.

\section{Display license}

\begin{wrapfigure}{r}{0.15\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_gpl_on.png}
\newline \vspace{-0.9\baselineskip}
\includegraphics[scale=\screenshotscale,clip]{include/images/button_gpl_off.png}
\end{wrapfigure}

This button is located in the \textbf{about window} and does not only
advertise that you are using free software licensed under the
\textbf{GNU General Public License} -- when clicked, it will also open
the license's website in your web browser \dots

\chapter{Meters}
\label{chap:meters}

All meters possess a completely flat frequency response.  Meter scales
can be adjusted using the ``Crest factor'' button (see
\ref{sec:crest_factor_button}).

\section{Peak level meter}

\begin{wrapfigure}{r}{0.21\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/level_meter_peak.png}
\end{wrapfigure}

The peak level meter has been calibrated so that an input sample value
of 1.0 reads \SI{0}{\dBFS} thus corresponding to
\href{http://www.aes.org/publications/standards/search.cfm?docID=21}{AES17-2015}.
The meter has a rise time of one sample and a fall time of
\SI{8.67}{\dB\per\second}.  A red LED marked ``OVR'' detects levels
exceeding \SI{-6}{\dBFS} and should never light.

Peaks will be indefinitely held until the meter is reset.

\newpage %% layout

\section{Average level meter}

\begin{wrapfigure}{r}{0.21\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/level_meter_average.png}
\end{wrapfigure}

The average level meter uses an averaging period of \num{1024}
samples.  It has been calibrated so that sine wave signals read the
same on both peak and average meters (AES17
\SI[retain-explicit-plus]{+3.01}{\dBFS}).  Similar to a VU meter, the
meter takes \SI{300}{\milli\second} to reach \SI{99}{\percent} of the
final reading.  It exhibits no overshoot, however.

Peaks will be held for \SI{10}{\second} and then fall with a speed of
\SI{8.67}{\dB\per\second}.

\section{Signal meter}

\begin{wrapfigure}{r}{0.21\linewidth}
\includegraphics[scale=\screenshotscale,clip]{include/images/level_meter_signal.png}
\end{wrapfigure}

The orange signal meter detects peak levels of \SI{-60}{\dBFS} and
above.  It has a rise time of one sample and simply fades out if the
level falls below the threshold.

\chapter{Recording tips}
\label{chap:recording_tips}

Over the years, I have accumulated a couple of recording tips.  You
may not know some of them, so read ahead \dots

\begin{description}

\item[Use a good preamp.]  ``Good'' doesn't mean your preamp has to
  have a lot of channels or features.  To the contrary!  Go for a
  simple design and invest your money in professional quality instead.
  Recordings made with a good preamp make mixing much easier -- the
  tracks simply seem to fall into place.

\item[ Use the preamp's gain control.]  If necessary, crank up the
  preamp to yield the needed output level.  Do not fear the preamp's
  internal noise -- making up for low gain in later stages will likely
  result in even more noise!  Also see \ref{sec:gain_staging}.

\item[Avoid unballanced equipment.]  Run all signals on balanced lines
  with a nominal level of \SI[retain-explicit-plus]{+4}{\dBu}.  If you
  can't, use DI boxes or transformers and read the previous sentence
  again \dots

\item[Use short audio chains.]  All equipment adds noise or may
  otherwise degrade audio, so keep your audio recording chains as
  short as possible.

  For example, instead of routing your mixer between preamp and hard
  disk recorder, connect the mixer to your hard disk recorder's
  \emph{outputs}.  This simple change can lead to much better
  recordings (especially with cheap mixers) and you'll still be able
  to hear yourself and other tracks during recording.

\item[Record at lower levels.]  Record digital audio at
  \textbf{\SI{-20}{\dBFS} RMS} with peak levels not exceeding
  \textbf{\SI{-9}{\dBFS}}.  For an in-depth explanation, see
  \ref{sec:gain_staging}.

\item[Record in mono.]  Most audio sources do not contain stereo
  information that is useful in a mixing context (notable exceptions
  are audience recordings, string sections and sometimes pianos).  The
  pseudo-stereo effects of some synthesisers may even cause phasing
  issues in the mixing stage.

  Recording these sources in stereo will only waste space on your hard
  disk and make you miserable during mixing.  So why not record them
  in mono in the first place?

\item[Use high bit depths.]  Do yourself a favour and record at bit
  depths of 24 bit instead of 16 bit.  Although most digital audio
  converters only provide 20 bits of \emph{noise-free} audio, the
  additional bits still provide an incredible amount of extra detail
  and you can record at lower levels without losing information.  When
  properly dithered, changing to a lower bit depth even preserves
  quite a bit of that detail.

  Also, if you edit audio files or apply effects, calculation errors
  are inevitable.  At 24 bit, however, most of these artifacts are
  \SI{48}{\dB} lower in level (and thus inaudible) compared to 16 bit
  audio files.

  Your digital audio workstation's bus should use at least 32 bits
  (floating point) to avoid accumulation of the above-mentioned
  artifacts.

\item[Try different sample rates.]  Recording at certain sample rates
  may sound better, so experiment and get to know your converters.
  But try to keep the sample rate to exact multiples of the target
  sample rate.  For instance, it makes sense to track at
  \SI{44.1}{\kilo\hertz} or \SI{88.2}{\kilo\hertz} for a CD release
  instead of using \SI{48}{\kilo\hertz}.

  Only use professional software for sample rate conversion.  This is
  by no means a trivial task.

\item[Concentrate on recording.]  When tracking, try to not interfere
  with the flow of the session.  This is easily done by keeping
  editing and mixing to the bare minimum.

  For example, I currently track using an old hard disk recorder, as
  digital audio workstations tend to distract me too much.

\item[Avoid copy'n'paste.]  Quite a lot of today's electronic music
  sounds like (and actually is) one short loop that was ``arranged''
  by occasionally muting some of its tracks.  This takes away all the
  small inaccuracies that happen when humans play instruments.  It
  also makes such tracks sound absolutely lifeless.

  So instead of looping a track, record a couple of takes and comp the
  best ones.  You'll be surprised at the difference it makes!

\item[Do not fix things later.]  A bad recording is a bad recording is
  a bad recording.  You can't really ``fix it in the mix''.  So tools
  like Auto-Tune, extreme EQ or the edit button should be seen as a
  last resort.  It's easy to kill all of a track's vibe in the
  process.

  Instead, record a few more takes.  Treat your room (acoustically and
  in terms of positive vibe).  Experiment with microphone placement.
  Try everything you can to help the musicians perform better.  Maybe
  you even have to look for better musicians \dots

\end{description}

\chapter{Validation}
\label{chap:validation}

I have gone to great lengths to ensure that the meters read correctly.
You want to validate for yourself?  Just download and extract the
source code.  The directory \path{validation} contains instructions
and FLAC-compressed wave files.  A word of warning: these audio files
may \textbf{damage your ears} and speakers, so please watch your
monitor levels!

Begin by starting traKmeter.  If in a Bash shell, try this:

\begin{VerbatimBoth}
  ./trakmeter_stereo 2>&1 | tee /tmp/validate.log
\end{VerbatimBoth}

\begin{wrapfigure}{r}{0.32\linewidth}
\includegraphics[scale=0.60,clip]{include/images/dialog_validation.png}
\end{wrapfigure}

After opening the \textbf{validation window} (see
\ref{sec:validation_button}), click on the ellipsis button (the one
with the dots) to select an audio file for playback through traKmeter.
Please make sure that the sample rates of your host (\textbf{Host SR})
and the audio file match, otherwise the results will not be correct.

Now, select which \textbf{variables} (if any) should be dumped.  You
may also restrict dumped data to a specific audio \textbf{channel}.
Check \textbf{CSV} if you want to feed the output to a parser.

Finally, click on the \textbf{validate} button to reset all meters and
start playback of the selected audio file.  All audio input will be
discarded during playback and for an additional twenty seconds.  To
stop playback early, simply click on the \textbf{validate} button
again.

\section{Validation status}

\begin{minipage}{1.0\linewidth}
  \renewcommand{\thempfootnote}{\arabic{mpfootnote}}
  \begin{tabular}{>{\bfseries}llcc}

    &
    \textbf{Test} &
    \textbf{Valid} \\

    Average level meter &
    visuals &
    \Checkmark{} \\

    &
    readout &
    \Checkmark{} \\

    Peak level meter &
    visuals &
    \Checkmark{} \\

    &
    readout &
    \Checkmark{} \\

    Signal meter &
    visuals &
    \Checkmark{} \\

  \end{tabular}
\end{minipage}

\chapter{Help needed}
\label{chap:help_needed}

As traKmeter was coded using cross-platform code, it should be easy to
compile on Mac OS X.  Unfortunately, I happen to not have a Mac \dots

In case you want to help, please see the next chapter for an email
address.  You’ll need sufficient experience in coding, compiling and
debugging, though, so no beginners please!

\chapter{Final words}
\label{chap:final_words}

I want to thank \textbf{Rickard} of Interfearing Sounds for asking me
how to use K-Meter for tracking.  This question and the following
thoughts really got traKmeter started.  I'd like to thank
\textbf{bram@smartelectronix} for his code to calculate logarithmic
rise and fall times.  I must also thank the \textbf{beta testers} and
\textbf{users of traKmeter} for sending kind words, suggestions and
bug reports.  Finally, I want to thank the \textbf{open source
  community} for making all of this possible.

Although coding traKmeter has been a lot of fun, it has also been a
lot of work.  So if you like traKmeter, why not send me a short email
and tell me so?  Write a few words about yourself, send suggestions
for future updates or volunteer to create a nice skin.  I also really
enjoy listening to music that you may have produced using my
software\dots

Here is my email address (please remove ``\texttt{-nospam}''):

\begin{center}
  \texttt{"Martin Zuther" <code-nospam@mzuther.de>}
\end{center}

Thanks for using free software.  I hope you'll enjoy it!

\appendix

\chapter{How to build traKmeter}
\label{chap:build_trakmeter}

\section{Preparing GNU/Linux}

To build traKmeter yourself, I recommend setting up a \texttt{chroot}
environment.  This is fast and easy to do on Debian-based systems and
might save you a \textbf{lot} of trouble.  At the time of writing, I'm
using Linux Mint 18, but the procedure should be similar on your
distribution of choice.

Start by installing the necessary packages:

\begin{VerbatimBoth}
  sudo apt-get install debootstrap schroot
\end{VerbatimBoth}

Then install the \texttt{chroot} base system by executing the
following statements:

\begin{Verbatim32}
  sudo debootstrap --variant=buildd \
    --arch i386 stable \
    /srv/chroot/stable_i386 \
    http://httpredir.debian.org/debian
\end{Verbatim32}

\begin{Verbatim64}
  sudo debootstrap --variant=buildd \
    --arch amd64 stable \
    /srv/chroot/stable_amd64 \
    http://httpredir.debian.org/debian
\end{Verbatim64}

Running \path{debootstrap} will take some time.  Meanwhile, add the
following lines to \path{/etc/schroot/schroot.conf} (make sure you
remove all preceding white space so that each line begins in the first
column):

\begin{VerbatimBoth}
  [stable-i386]
  description=Debian stable (i386)
  directory=/srv/chroot/stable_i386
  profile=default
  personality=linux32
  type=directory
  users=username

  [stable-amd64]
  description=Debian stable (amd64)
  directory=/srv/chroot/stable_amd64
  profile=default
  personality=linux
  type=directory
  users=username
\end{VerbatimBoth}

Please make the necessary changes to \texttt{username}.  If you
experience problems, you can try to change \texttt{stable} to a
release name such as \texttt{wheezy}.

When \path{debootstrap} is done, log in as superuser:

\begin{Verbatim32}
  schroot -c stable-i386 -u root
\end{Verbatim32}

\begin{Verbatim64}
  schroot -c stable-amd64 -u root
\end{Verbatim64}

You'll have to install a few packages -- \path{less} and \path{vim}
are optional, but might come in handy:

\begin{VerbatimBoth}
  apt-get update
  apt-get -y install bash-completion clang \
    libasound2-dev libjack-jackd2-dev \
    mesa-common-dev xorg-dev less vim
  apt-get clean
\end{VerbatimBoth}

If you like \path{bash} completion, you might also want to open the
file \path{/etc/bash.bashrc} and unquote these lines:

\begin{VerbatimBoth}
  # enable bash completion in interactive shells
  if [...]
    [a couple of lines...]
  fi
\end{VerbatimBoth}

Finally, log out and log in as normal user:

\begin{Verbatim32}
  schroot -c stable-i386
\end{Verbatim32}

\begin{Verbatim64}
  schroot -c stable-amd64
\end{Verbatim64}

In this \path{chroot} shell, install the dependencies (see below).
Congratulations -- you are now ready to build traKmeter!

\section{Dependencies}

\subsection{premake}
\label{sec:dependencies_premake}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> required \\
  Version:     \> 5.0.0 (alpha12) \\
  License:     \> BSD \\
  Homepage:    \> \href{https://premake.github.io/}{premake.github.io}
\end{tabbing}

\subsubsection{Installation}

Place the binary somewhere in your \path{PATH}.  Depending on your
platform, you should run \path{premake} using the scripts
\path{Builds/run_premake.sh} or \path{Builds/run_premake.bat}.

To change the premake file using the provided Jinja templates, you'll
also have to install the necessary dependencies.

\newpage %% layout

\subsection{JUCE library}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> required \\
  Version:     \> 5.3.2 \\
  License:     \> ISC and GPL v3 (among others) \\
  Homepage:    \> \href{http://www.juce.com/}{www.juce.com}
\end{tabbing}

\subsubsection{Installation}

Extract the archive into the directory \path{libraries/juce}.

If you want to build the LV2 plug-in, please extract the archive
\path{distrho_lv2-xxxxxxxx.tar.gz} into the same directory.

\subsection{Virtual Studio Technology SDK}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> optional \\
  Version:     \> 2.4 / 3.6.8 \\
  License:     \> proprietary / GPL v3 \\
  Homepage:    \> \href{http://www.steinberg.net/en/company/developer.html}{www.steinberg.net}
\end{tabbing}

\subsubsection{Installation}

Just extract the archive into the directory
\path{libraries/vst}.

\subsection{Python}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> optional \\
  Version:     \> 3.5 (or higher) \\
  License:     \> Python Software Foundation License \\
  Homepage:    \> \href{http://www.python.org/}{www.python.org}
\end{tabbing}

You'll only need Python if you want to change the premake file (see
\ref{sec:dependencies_premake}) using Jinja templates.

\subsubsection{Installation (Windows)}

You can download an installer from the website.

\subsection{Jinja}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> optional \\
  Version:     \> 2.8 (or higher) \\
  License:     \> BSD \\
  Homepage:    \> \href{http://jinja.pocoo.org/}{jinja.pocoo.org}
\end{tabbing}

You'll only need Jinja if you want to change the premake file using
templates (see \ref{sec:dependencies_premake}).

\subsection{Artistic Style}

\begin{tabbing}
  \hspace*{6em}\=\=\kill

  Importance:  \> optional \\
  Version:     \> 2.05.1 \\
  License:     \> LGPL v3 \\
  Homepage:    \> \href{http://astyle.sourceforge.net/}{astyle.sourceforge.net}
\end{tabbing}

This application formats the code so it looks more beautiful and
consistent.  Thus, you only have to install it if you plan to help me
with coding traKmeter.

\subsubsection{Installation}

Place the binary somewhere in your \path{PATH}.  Depending on your
platform, you should run \path{astyle} using the scripts
\path{Source/format_code.sh} or \path{Source/format_code.bat}.

\section{Building on GNU/Linux}

After preparing the dependencies, start your \texttt{chroot}
environment, change into the directory \path{build} and execute

\begin{VerbatimBoth}
  ./run_premake.sh
  make config=CFG TARGET
\end{VerbatimBoth}

where \application{CFG} is one of \application{debug\_x32},
\application{debug\_x64}, \application{release\_x32} and
\application{release\_x64}, and \application{TARGET} is the version
you want to compile, such as \application{linux\_standalone\_stereo}.

You can switch compilers by opening the file \texttt{run\_premake.sh}
and using the premake options \texttt{--cc=clang} or
\texttt{--cc=gcc}.

The compiled binaries will end up in the directory \path{bin}.

\section{Building on Microsoft Windows}

After preparing the dependencies, change into the directory
\path{build} and execute

\begin{VerbatimBoth}
  ./run_premake.bat
\end{VerbatimBoth}

Then change into the directory \path{Builds/windows/vs20xx}, open the
project file with the corresponding version of Visual C++ and build
the project.

The compiled binaries will end up in the directory \path{bin}.

\chapter{Licenses}

\scriptsize
\input{include/gpl_v3.tex}
\normalsize

\scriptsize
\input{include/cc-by-sa-4.0.tex}
\normalsize

\end{document}


%%% Local Variables:
%%% mode: latex
%%% mode: outline-minor
%%% TeX-command-default: "Rubber"
%%% TeX-master: t
%%% TeX-PDF-mode: t
%%% ispell-local-dictionary: "british"
%%% End:
